\subsection{Subgradients}

\begin{proposition}
 Let $J : U \rightarrow (-\infty, \infty]$ be proper and convex, let $x \in 
 \dom J$, and let $y \in U$. Then the following hold:
 \begin{enumerate}
 	\item Let $\phi:\mathbb{R}_+\rightarrow (-\infty, \infty]$, such that $\phi(\alpha) := \frac{J(x+\alpha y) -J(x)}{\alpha}$. $\phi$ is increasing.
 	\item $J'(x;y)$ exists in $[-\infty, \infty]$ and  \[J'(x;y)=\inf_{\alpha \in \mathbb{R}_+} \frac{J(x+\alpha y)-J(x)}{\alpha}.\]
 	\item $J'(x; y-x)+J(x)\leq J(y)$.
 	\item $J'(x; \cdot)$ is sublinear and $J'(x; 0)=0$
 	\item $J'(x; \cdot)$ is proper, convex, and $\dom J'(x; \cdot) = \cone(\dom f - x)$.
 \end{enumerate}
\end{proposition}

\begin{proposition}
	Let $J: U \rightarrow (-\infty, \infty]$ be convex, let $x\in U$, and suppose
	that $J$ is G\^ateaux differentiable at $x$. Then $\forall y \in U$ $(y - x \mid \nabla J(x))_{UU*}+J(x) \leq J(y)$.
\end{proposition}	

\begin{proposition}
	 Let $J: U \rightarrow (-\infty, \infty]$ be proper. Suppose that $\dom J$
	 is open and convex, and that $J$ is G\^ateaux differentiable on $\dom J$ . Then the
	 following are equivalent:
	 \begin{enumerate}
		 \item $J$ is convex.
		 \item $\forall x,y \in \dom J, \quad \left(x-y\mid \nabla J(x)\right)_{UU^*}\leq f(x)-f(y)$.
		 \item $\forall x,y \in \dom J, \quad 0 \leq \left(x-y\mid \nabla J(x)-J(y)\right)_{UU^*}$, i.e. $
		 \nabla J(x)$ is monotone.
	 \end{enumerate}
	 \begin{proof}\
	 	\begin{itemize}
		 \item $(1)\implies (2)$.  Let $x,y \in \dom J$, and $z \in U$. Since $\dom J$ is open, $\exists \epsilon >0$, such that $x+\epsilon(x-y) \in \dom J$ and $y+\epsilon(y-x) \in \dom J$. Set $C=(-\epsilon, 1+\epsilon)$ and the function $\phi: \mathbb{R}\rightarrow(-\infty, \infty)$

		 \[
			 \phi(\alpha) = J(y+\alpha(x-y))+I_C(\alpha).
		 \]
		 
		 Where $I_C$ is the indicator function.  Then $\phi$ is Gate\^aux differentiable on $C$ and $\forall \alpha \in C$,
		 
		 \[
			 \phi'(\alpha)=\left(x-y\mid\nabla J(y+\alpha (x-y))\right)_{UU^*}
		 \]
		 \item $(2)\implies(3)$. 
		 
		 \item 
		 \item 
		\end{itemize}
		 
	 \end{proof}
\label{prop5. First derivative convex.}
\end{proposition}

\begin{theorem}
	\label{th5. Secon derivative convex.}
	 Let $J: U \rightarrow (-\infty, \infty]$ be proper. Suppose that $\text{dom} f$
	 is open and convex, and that $f$ is twice G\^ateaux differentiable on $\text{dom} f$ . Then,
	 \[
		 (\forall x \in \dom f )(\forall y \in \dom f ) \quad (z\mid  \nabla^2 f(x)z)_{UU^*} \geq 0
	 \]
\end{theorem}
\begin{definition}
	Let $U$ be a Banach space and let $J:U\rightarrow (-\infty, \infty]$ be a convex and proper function.
	The subdifferential at a point $u \in \dom J$ is a mapping,
	\[
		\partial J : U \rightarrow 2^{U^*}, \qquad \partial J(u):=\lbrace p^* \in U^* \ | \ J(v)\geq J(u)+p^*(v-u),
		\ \forall v \in U\rbrace
	\]
	The elements of $p^* \in \partial J(u)$ are called subgradients of $J$ at $u$.
\end{definition}
\begin{example}
	Consider $J:\mathbb{R}\rightarrow \mathbb{R}$, $u\rightarrow \abs{u}$ which is not differentiable at $u=0$. If $u>0$, then $J(u)=u$ and we can find $0<v<u<w$. Then $p^* \in \partial J(u)$ implies by definition of subdifferential
	\begin{align*}
		v-u \geq p^*(v-u) &\equiv (1-p^*)(u-v) \leq 0 \\
		w-u \geq p^*(w-u) &\equiv (1-p^*)(w-u) \geq 0.
	\end{align*}
	which implies for $u>0$, $p^* \leq 1 \leq p^*$, then $p^*=1$.
	
	In the same way we obtain for $u<0$, $p^*\geq -1 \geq p^*$. 
	In the case $u=0$, we need to satisfy $\abs{v}\geq p^*v$, which is fulfilled if and only if $\abs{p^*}\leq 1$. Hence for $J(u)=\abs{u}$,
	\begin{equation*}
	\partial \abs{u}=
	\left\lbrace
		\begin{array}{lr}
		\{1\}, & u>0 \\
		\left[-1,1\right], & u=0 \\
		\{-1\}, & u < 0
		\end{array}
	\right. .
	\end{equation*}
\end{example}

\begin{example}
	A convex function which is not subdifferentiable everywhere $J:\mathbb{R} \rightarrow \mathbb{R}$, 
	\begin{equation*}
		J(u)=\left\lbrace\begin{array}{cl}
		 -\sqrt{1-\abs{u}^2} &\quad \abs{u}\leq 1 \\
		 \infty &\quad \text{otherwise}
		\end{array}
	\right.
	\end{equation*}
	For $\abs{u}\geq 1$, we have $\partial J(u) = \emptyset$.
\end{example}

\begin{example}
	Let $C$ be a convex and closed subset of $U$ and $I_C$ function defined by
	\[
		I_C (u)=
		\left\lbrace
		\begin{array}{cl}
			0 \quad& u\in C \\
			\infty \quad& \text{otherwise}
		\end{array}
		\right.
	\]
	The subdifferentiable is the definition of normal cone at $u$
	\[\partial I_C (u)=\lbrace u^* \in U^* \ | \ u^*(u-v)\geq \forall v \in C\rbrace = \mathcal{N}_C(u)\].

\end{example}

\begin{theorem}
	Let $U$ be a Banach space. And $J: U\rightarrow \overline{\mathbb{R}}$ a subdifferentiable function. Then $\partial J(u)$ is convex and weakly closed.
\end{theorem}

\begin{remark}
	Most of the rules for derivates also hold for subdifferentials with some additional assumptions,
	\begin{itemize}
		\item $J:U\rightarrow \overline{\mathbb{R}}$, $\lambda > 0$, $\partial J(\lambda u)=\lambda J(u)$.
		\item $\partial(J+F)(u) \supseteq \partial J(u)+ \partial F(u)$.
	\end{itemize}
\end{remark}

\begin{theorem}[Rockafeller]
	Let $U$ be a Banach space and $J: U\rightarrow \mathbb{R}$ proper and convex functions for $i=1,\dots, n$.
	The sum-rule
	\[
		\partial(J_1+\dots+J_n)(u)=\partial J_1(u)\dots \partial J_n(u), \qquad n\geq 2
	\]
	holds if there exists $u_0 \in U$ such that all $J_i(u_0)$ are finite and all $J_i$ except at most one $J_k$, $k\in \lbrace 1,2,\dots n\rbrace$ are continuous at $u_0$
\end{theorem}